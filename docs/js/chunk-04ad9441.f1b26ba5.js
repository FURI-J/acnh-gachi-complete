(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04ad9441"],{ad90:function(e,t,a){},d721:function(e,t,a){"use strict";var r=a("ad90"),s=a.n(r);s.a},fbd8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"share"},[a("PageToTop"),a("div",{staticClass:"view-btn-wrapper"},[a("router-link",{staticClass:"flat-btn",attrs:{to:"/"}},[e._v(" 自分のページを表示 ")])],1),a("h1",{staticClass:"header"},[a("span",{staticClass:"header-lg"},[e._v(e._s(e.navText))]),e.isLoaded?a("div",{staticClass:"header-sm"},[e._v(" "+e._s(e.sharedUserName)+"さんのコンプ状況 ")]):e._e()]),a("div",{staticClass:"filter"},[a("FilterUI",{attrs:{filter:e.filter,currentNav:e.nav,showSaleFilter:e.isShowSaleFilter,showBatchAction:!1,showShareButton:!1},on:{change:e.onChangeFilter}}),a("CollectedBar",{attrs:{totalValue:e.getTotalLength(),value:e.getCollectedLength()}})],1),e.showItems&&e.showItems.length>0?a("ul",{staticClass:"items",class:{tiles:"tile"===e.filter.viewMode}},e._l(e.showItems,(function(t){return a("Item",{key:t.name+t.sourceSheet,attrs:{item:t,collected:e.getCollected(t),filter:e.filter,isStatic:!0,renderStartDate:e.renderStartDate}})})),1):e._e(),a("div",{staticClass:"message"},[e._v(e._s(e.message))])],1)},s=[],i=(a("4de4"),a("c975"),a("a434"),a("b0c0"),a("3ca3"),a("ddb0"),a("96cf"),a("eb11")),n=a.n(i),l=a("4ee7"),o=a("2e3f"),c=a("5e7d"),d=a("784c"),h=a("dedb"),u=a("47b9"),f=l["a"].firestore(),m={components:{Item:c["a"],FilterUI:d["a"],CollectedBar:h["a"],PageToTop:u["a"]},data:function(){return{sharedUserName:"",message:"データを読み込んでいます。",isLoaded:!1,showItems:[],filter:{saleFilter:"0",collectedFilter:"0",viewMode:"tile"},renderStartDate:null}},computed:{sharedUid:function(){return this.$route.params.id},sharedCollected:function(){return this.$store.getters.sharedCollected},nav:function(){return this.$route.params.category},isShowSaleFilter:function(){if(this.nav)for(var e=["housewares","walletc","fashion"],t=0;t<e.length;t++)if(-1!==this.nav.indexOf(e[t]))return!0;return!1},navText:function(){return Object(o["c"])(this.nav)}},mounted:function(){null===this.sharedCollected?this.loadOtherFirebaseData():(this.message="",this.isLoaded=!0,this.updateShowItems())},methods:{loadOtherFirebaseData:function(){console.log("load");var e=this;f.collection("users").doc(e.sharedUid).get().then((function(t){if(t.exists){var a=t.data().collected||{},r=JSON.parse(n.a.decompressFromUTF16(a));e.$store.commit("updateSharedCollected",r),e.message="",e.isLoaded=!0,e.sharedUserName=t.data().userName,e.updateShowItems()}else e.message="データを読み込めませんでした。URL が間違えているか、データが存在しません。",e.isLoaded=!0,e.$store.commit("updateSharedCollected",{}),e.updateShowItems()})).catch((function(){e.message="データを読み込めませんでした。",e.isLoaded=!0,e.$store.commit("updateSharedCollected",{}),e.updateShowItems()}))},getCollected:function(e){return e.uniqueEntryId?this.sharedCollected[e.uniqueEntryId]:this.sharedCollected[e.name]},onChangeFilter:function(e){this.filter=e,this.updateShowItems()},getTotalLength:function(){return Object(o["e"])({collected:{},nav:this.nav,filter:Object.assign({},this.filter,{collectedFilter:"0"}),isShowSaleFilter:this.isShowSaleFilter})},getCollectedLength:function(){return Object(o["a"])({collected:Object.assign({},this.sharedCollected),nav:this.nav,filter:Object.assign({},this.filter,{collectedFilter:"3"}),isShowSaleFilter:this.isShowSaleFilter})},updateShowItems:function(){var e=this;e.renderStartDate=(new Date).getTime();var t=e.renderStartDate,a=Object(o["b"])({collected:e.sharedCollected,nav:e.nav,filter:e.filter,isSearchMode:!1,isShowSaleFilter:e.isShowSaleFilter,searchText:"",false:!1});if(a.length<50)e.showItems=a,e.isSearchResultOverThreshold=!1;else{e.isSearchResultOverThreshold=!1,e.showItems=[];for(var r=0;r<50;r++){var s=a[r];e.showItems.push(s)}a.splice(0,50);var i=a,n=regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=i.splice(0,50),!(r.length<=0||e.renderStartDate>t)){a.next=3;break}return a.abrupt("return","break");case 3:return a.next=5,setTimeout((function(){if(!(e.renderStartDate>t)){for(var a=r.length,s=0;s<a;s++){var i=r[s];e.showItems.push(i)}n.next()}}));case 5:case"end":return a.stop()}}),a)}));case 1:return a.delegateYield(r(),"t0",3);case 3:if(s=a.t0,"break"!==s){a.next=6;break}return a.abrupt("break",8);case 6:a.next=1;break;case 8:case"end":return a.stop()}}),a)}))();n.next()}}}},v=m,w=(a("d721"),a("2877")),g=Object(w["a"])(v,r,s,!1,null,"4dba4792",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-04ad9441.f1b26ba5.js.map